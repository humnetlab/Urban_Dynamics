library(tidyverse)
library(data.table) # fast data aggregation
library(stringr)
library(hexbin)
library(ggplot2)
#require(ggplot2)
require(dplyr)
dist_data <- read_csv('~/Desktop/HuMNetLab/results/lisbon/rgy_ahorasi_lisbon.csv',
col_types = cols(h_tract = col_character(),
user_id = col_character(),
distance = col_double(),
n_visits=col_integer())) %>%
#spread(key = group, value = n, fill = 0) %>%
data.table()
timegeo<-select(dist_data,h_tract)
nrow(dist_data)
dist_data
centroides <- read_csv('~/Desktop/HuMNetLab/results/lisbon/lisbon_centroids.csv',
col_types = cols(GEOID = col_character(),
lon = col_double(),
lat = col_double())) %>%
data.table()
centroides <- read_csv('~/Desktop/HuMNetLab/results/lisbon/lisbon_centroids.csv',
col_types = cols(GEOID = col_character(),
lon = col_double(),
lat = col_double())) %>%
data.table()
###put centroids locations for origin and destination
head(centroides)
dist_data<- merge(dist_data, centroides, by.x = "h_tract", by.y = 'GEOID',all=TRUE)
head(dist_data)
allinfo <- read_csv('~/Desktop/HuMNetLab/results/lisbon/inputs_lisbon_htract_all.csv',
col_types = cols(h_tract = col_character(),
pop = col_double(),
area = col_double(),
mi = col_double(),
mj = col_double(),
Oi = col_double(),
Dj = col_double(),
dens_pop = col_double(),
dens_mi = col_double(),
dens_Oi = col_double(),
dens_Dj = col_double(),
d_av = col_double(),
#n_av = col_double(),
lon = col_double(),
lat = col_double())) %>%
data.table()
allinfo<-subset(allinfo, select=c("h_tract","dens_pop","dens_Dj"))
dist_data<- merge(dist_data, allinfo, by.x = "h_tract", by.y ="h_tract")
write.csv(dist_data,"~/Desktop/HuMNetLab/results/lisbon/rgy_lisbon_info.csv",quote=FALSE,row.names=FALSE)
dist_data <- read_csv('~/Desktop/HuMNetLab/results/porto/rgy_ahorasi_porto.csv',
col_types = cols(h_tract = col_character(),
user_id = col_character(),
distance = col_double(),
n_visits=col_integer())) %>%
#spread(key = group, value = n, fill = 0) %>%
data.table()
timegeo<-select(dist_data,h_tract)
nrow(dist_data)
dist_data
centroides <- read_csv('~/Desktop/HuMNetLab/results/porto/porto_centroids.csv',
col_types = cols(GEOID = col_character(),
lon = col_double(),
lat = col_double())) %>%
data.table()
centroides <- read_csv('~/Desktop/HuMNetLab/results/porto/porto_centroids.csv',
col_types = cols(GEOID = col_character(),
lon = col_double(),
lat = col_double())) %>%
data.table()
###put centroids locations for origin and destination
head(centroides)
dist_data<- merge(dist_data, centroides, by.x = "h_tract", by.y = 'GEOID',all=TRUE)
head(dist_data)
allinfo <- read_csv('~/Desktop/HuMNetLab/results/porto/inputs_porto_htract_all.csv',
col_types = cols(h_tract = col_character(),
pop = col_double(),
area = col_double(),
mi = col_double(),
mj = col_double(),
Oi = col_double(),
Dj = col_double(),
dens_pop = col_double(),
dens_mi = col_double(),
dens_Oi = col_double(),
dens_Dj = col_double(),
d_av = col_double(),
#n_av = col_double(),
lon = col_double(),
lat = col_double())) %>%
data.table()
allinfo<-subset(allinfo, select=c("h_tract","dens_pop","dens_Dj"))
dist_data<- merge(dist_data, allinfo, by.x = "h_tract", by.y ="h_tract")
write.csv(dist_data,"~/Desktop/HuMNetLab/results/porto/rgy_porto_info.csv",quote=FALSE,row.names=FALSE)
